# Survey API

This is a coding challenge project to build an API that enables the creation and taking of user surveys.

The project is just the backend side and the API implementation.
I've used [Node.js](https://nodejs.org/) ([JavaScript](https://tc39.es/ecma262/)) and [Express.js](https://expressjs.com) as its framework along with a bunch of other packages like [Ajv](https://ajv.js.org/) for validation, [JWT](https://jwt.io) for authentication, [jest](https://jestjs.io) as testing framework and [swagger](https://swagger.io/) for API documentation.

---

## Start the Project

In order to run the project, you need to clone the repository.

For cloning the repository, first, you need to go to the desire directory and then run the command below:

```bash
git clone https://github.com/Babak-Gholamzadeh/survey-api.git
```

After that, a directory will be created with the name of `survey-api`, which you should go into that.

```bash
cd ./survey-api
```

### Config the Project

Here there exists a file named `.env.example` which contains some environment variable that is used inside the project.

You should rename it to `.env` and fill the variables.

```bash
mv .env.example .env
```

You can fill the variables with your values or just use these sample values as below:

```
PORT = 3000

JWT_SECRET_KEY = 'This is a secret'

DB_NAME_PROD = 'app_db'
DB_NAME_DEV = 'app_db_dev'
DB_NAME_TEST = 'app_db_test'
```

### Install the Project Dependencies

Now you need to install the dependencies by running the following code:

```bash
npm install
```

or

```bash
yarn install
```

After installing the dependencies, the project is ready to be run.

### Run the Project

For running the Server there are some scripts in the package.json file that you take advantage of them.

Run the project in development mode:

```bash
npm run start:dev
```

Or run the command below for production mode:

```bash
npm start
```

*Or use `yarn` if it works better for you*

### Test the Server

And also there are some integration  tests in the `./tests` directory that you can run them by running this command:

```bash
npm test
```

Now the Server is ready to serve.

---

## Project Structure

```
|   app.js                              # Express app
|   index.js                            # Server entry point
+---controllers                         # The controller layer 
+---db                                  # The in-memory database
+---docs                                # Swagger Restful APIs documentation
+---middlewares
|   |   authentication.js               # Authenticate routes
|   |   express-response-handler.js     # Assign `success` and `fail` methods to `res` object
|   +---express-error-handler           # Handle the errors and struct the error responses
|   \---validation                      # Validate the date of the request body
+---models                              # Data models
+---routes                              # Define routes and call middlewares and controllers
+---services                            # Business logic (Service layer)
+---tests                               # Includes some integeration tests for testing APIs
\---utils                               # some generic utilities that can be used in any project
```

---

## API Documentation

The API documentation is generated by using [swagger](https://swagger.io/), and it is accessible via the `/docs` endpoint.
